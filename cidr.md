> 最近在开发一个CDN调度的功能，正好用到了CIDR，简单总结一下 

### IPV4概述
IPV4 长度为 32 位 ，根据地址的前几位，可定义各种地址类：A、B、C、D 或 E
IPv4 地址的文本格式为 nnn.nnn.nnn.nnn，其中 0<=nnn<=255，而每个 n 都是十进制数。
如果用位来表示则是 <0000 0000>.<0000 0000>.<0000 0000>.<0000 0000>

### CIDR概述
随着地址空间的消耗，使用“无类域间路由”（**CIDR**）进行更小的分配，无分类域间路由选择 （Classless Inter-Domain Routing）将好几个IP网络结合在一起，使用一种无类别的域际路由选择算法，可以减少由[核心路由器](https://baike.baidu.com/item/核心路由器)运载的路由选择信息的数量
CIDR消除了传统 A 类、B 类和 C 类地址以及划分子网概念，可以更加有效地分配 IPv4 地址空间
表示：采用两部分 Netid + hostid / 网络前缀长度 (Netid比特位个数)， Netid也称为网络前缀，比如202.197.12. 0/24

### CIDR计算
例如：128.14.32.0/20
1. 首先看 网络前缀长度，我们知道每个数字是8位，但是20不是8的倍数，我们可以拆分 20 = 16 + 4，16表示这个IP地址的前16位保持不动 即 128.14.
2. 问题出在第3个8位上 这个位上的前 4位被拿去做网络号，后4位被拿去做主机号，我们将第3位的32二进制表示是00100000
3. 所以我们得到这个cidr表示的网络地址（主机号全是0） 128.14.<0010><0000>.<0000 0000> 即 128.14.32.0
4. 也得到广播地址（主机号全是1）128.14.<0010><1111>.<1111 1111> 即 128.14.47.255
5. 网络掩码是 前20位全是 1 即 255.255.240.0
6. 根据以上规则可以写代码实现计算cidr 的逻辑
